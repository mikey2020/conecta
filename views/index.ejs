<!DOCTYPE html>
<html>
  <head>
    <title><%= title%></title>

  </head>
  <% include temps/header.ejs %>
  <body>
  	<div class="container">
	  <div class="jumbotron">
	    <h2>hello <%=name%></h2>
	    <% if(results) { %>
	    	<p><%results.firstname + " " + results.lastname%></p>
	    <%}%>
	    <div > 

			<p>Search Results:</p>
			<h1>{{name}}</h1>
			<p>{{results}}</p>

		</div>
	</div>

	<script>

		const app = angular.module('myApp', []);
		app.controller('myCtrl', function($scope, $http) {
			

			$scope.search = ()=> {
				$scope.name;
				const data = {"query": $scope.name};
				$http.post("/search",data)
			    .then(function(response) {
			    	//$scope.PostDataResponse = data;
			    	if(response){
			    		$scope.results = response.data.firstname + " " + response.data.lastname;
			    	}
			    	else if(response == null){
			    		$scope.results="";
			    	}
			        
			    });
			}
		    
		});
	</script>
  </body>
  </div>
</html>
